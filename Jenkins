pipeline
{
    environment
    {
        registry = kramiyer/capstonekramesh
        registryCredential = ‘dockerhub’
    }

    agent any
    stages
    {
        stage('initial slack message')
        {
            steps
            {
                sh 'echo Building...'
                slackSend message:"Build Started - ${env.JOB_NAME}"
            }
        }
        stage('linting Dockerfile')
        {
            steps
            {
                script
                {
                    docker.image('hadolint/hadolint:latest-debian').inside()
                    {
                        sh 'hadolint Dockerfile'
                        
                        slackSend message:"Linting Dockefile- ${env.JOB_NAME}"
                    }
                }
            }
        }
        stage('Build Docker')
        {
            steps
            {
                script
                {
                    docker.build registry + ":$BUILD_NUMBER"
                }
            }
        }
        
    }
}